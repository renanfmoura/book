\chapter{Conjuntos}

\section{Introdução}

    Para tratar de conjuntos iremos tentar uma abordagem que que não deixe de lado o rigor matemático necessário, mas que ao mesmo tempo permita utilizar o Lean e contextualizar exemplos do dia a dia. 
    
    Caro leitor, como você definiria conjunto? Vamos, pense um pouco. No século XIX, o matemático Georg Cantor, no jornal acadêmico Mathematische Annalen, descreveu um conjunto (ou utilizando sua terminologia, \textit{Menge}) como, em tradução livre: “Por conjunto nós entendemos qualquer coleção $M$ de objetos deteminados e distintos (chamados de elementos de $M$) da nossa intuição ou do nosso pensamento em um todo."
    
    Ou seja, mesmo um conjunto podendo ser algo tão abstrato quanto os números naturais ($\mathbb{N}$), os números reais ($\mathbb{R}$) e o Conjuntor de Cantor, podemos ter coisas menos abstratas como o conjunto das palavras desse texto, o dos planetas do Sistema Solar ou até dos alunos de sua turma. A questão é, todos esses conjuntos podem ser mais intuitivos ou abstratos (além de como são definidos) dependendo da pessoa que irá interpretá-los, por exemplo o conjunto dos naturais pode ser definido como $\mathbb{N} = \{1,2,3,...\}$ ou $\mathbb{N}=\{0,1,2,3,...\}$ (para não desagradar ninguém), o planetas do Sistema Solar $ P = \{ Mercurio, Venus, Terra, \\ Marte, Jupiter, Saturno, Urano, Netuno \}$ (lembramos que se este livro fosse escrito a uns 15 anos Plutão, na época, ainda seria considerado como um planeta, isto é, estaria no conjunto), por consequência, vemos que a interpretação do que determinado conjunto representa varia de pessoa para pessoa, mesmo que a ideia principal continue a mesma.
    
    Nosso intuito, durante essa aventura pelo mundo dos conjuntos será entender melhor certos conceitos e definições (como o fato do conjunto vazio estar contido em todos os conjuntos, ou se chegarmos até lá, porque o intervalo [0,1] nos reais não é enumerável), através de demosntrações, exemplos e exercícios, aumentando sua capacidade de abstração e a nossa também, já que para escrever esse capítulo nós teremos que ir além, pois não queremos apenas entender o que está aqui, mas que você entenda e aprenda também.

\section{Fundamentações}
    \subsection{Notações}
    Nesta seção iremos começar a introduzir notações matemáticas e algumas definições sobre conjuntos.
    
    \textbf{Pertence e Não Pertence:} Quando um determinado elemento $x$ faz parte de determinado conjunto $A$, nós dizemos que $x$ pertence a $A$ (denotamos $x \in A$). Caso $x$ não faça parte de $A$, diz-se que $x$ não pertence a $A$ (denota-se  $x \notin A$).
    
    \textbf{Contém, Contido e similares:} Já quando um conjunto $B$ possui todos os elementos que $A$ possui e, $B$ tem, pelo menos, um objeto que $A$ não possua, dizemos que $A$ está contido em $B$ ($\space A \subset B$) ou que $B$ contém $A$ ($B \supset A$)%$^{\ref{fig:sets-02-00}}$%
    . Se não sabemos se $B$ possui um objeto que $A$ não possua (e $B$ ainda possui todos os elementos que $A$), denotamos $A \subseteq B$, que quer dizer que $A \subset B$ ou $A=B$, de modo equivalente $B \supseteq A$, significa que $B \supset A$ ou $A=B$. Se $A$ possui pelo menos um elemento que $B$ não possua, dizemos que $A$ não está contido em $B$ ($A \not\subset B$) ou que $B$ não contém $B\not\supset A$, assim $A \neq B$. 
    
    %\begin{figure}[hbt!]
     %   \centering      
      %  \includegraphics[width = 7.5 cm]{figures/sets/fig-sets-02-00.png}
       % \caption{O conjunto $A$ está contido no conjunto $B$, equivalentemente, $B$ contém $A$.}
        %\label{fig:sets-02-00}
    %\end{figure}

    \textbf{Interseção:} Se estamos interessados em conjuntos/elementos que pertencem simultaneamente a dois conjuntos $A$ e $B$, dizemos que estamos interessados na interseção de $A$ e $B$ (denotada como $A \cap B$)%$^{\ref{fig:sets-02-01}}$.
    
%    \begin{figure}[hbt!]
 %       \centering      
  %      \includegraphics[width = 7.5 cm]{figures/sets/fig-sets-02-01.png}
   %     \caption{A região azul representa a visualização da interseção dos conjuntos $A$ e $B$.}
    %    \label{fig:sets-02-01}
    %\end{figure}
    
    \textbf{União :}Já se estamos interessados nos conjuntos/elementos que fazem parte de $A$ ou de $B$ dizemos que, nosso objetivo é a união de $A$ e $B$ ($A \cup B$)%$^{\ref{fig:sets-02-02}}$.
    
%       \centering      
 %       \includegraphics[width = 7.5 cm]{figures/sets/fig-sets-02-02.png}
  %      \caption{A região azul representa a visualização da união dos conjuntos $A$ e $B$.}
   %     \label{fig:sets-02-02}
    %\end{figure}
    
    \textbf{Universo:} Quando estamos trabalhando com conjuntos é comum definirmos quem é nosso universo ($ \mathcal U $), isto é, o conjunto que conterá todos os conjuntos/elementos que estaremos trabalhando em um contexto%$^{\ref{fig:sets-02-03}}$. Por exemplo, na reta real nosso universo é $\mathcal U = \mathbb{R}$.
    
%    \begin{figure}[hbt!]
 %      \includegraphics[width = 7.5 cm]{figures/sets/fig-sets-02-03.png}
  %      \caption{A região azul representa a visualização do nosso Universo.}
   %     \label{fig:sets-02-03}
    %\end{figure}
    
    \textbf{Conjunto Complementar:} Sendo $A$ um conjunto, dizemos que o conjunto $A$ complementar ou complemento de $A$ (denotado como $\overline A$ ou $A^C$)contém todos os conjuntos/elementos que não estão contidos/pertencem a $A$, mas fazem parte de nosso universo ($\mathcal U$)%$^{\ref{fig:sets-02-04}}$.
    
%    \begin{figure}[hbt!]
 %      \includegraphics[width = 7.5 cm]{figures/sets/fig-sets-02-04.png}
  %      \caption{A região azul representa a visualização do complemento de $A$.}
   %     \label{fig:sets-02-04}
    %\end{figure}
    
    \textbf{Diferença de Conjuntos :} Quando temos dois conjuntos e nosso objetivo são os conjuntos/elementos que pertencem a um destes conjuntos, mas não do outro dizemos que estamos interessados na diferença destes conjuntos. No caso, se quero os conjuntos/elementos de $B$, mas não queremos pegar os que também pertencem a $A$, queremos os elementos/conjuntos que pertencem a diferença de $B$ com $A$ (denotamos como $B-A$ ou $B \backslash A$)%$^{\ref{fig:sets-02-05}}$.
    
%    \begin{figure}[hbt!]
 %       \centering      
  %      \includegraphics[width = 8 cm]{figures/sets/fig-sets-02-05.png}
   %     \caption{A região azul representa a visualização da diferença entre os conjuntos $B$ e $A$, isto é, a área onde estão os elementos que pertencem a $B$, mas não pertencem a $A$.}
    %    \label{fig:sets-02-05}
    %\end{figure}
    
    Lembre-se: os diagramas apresentados servem como ferramenta auxiliar para ajudar a entender os conceitos, mas não devem ser vistos como a única ferramenta para compreender as definições e  a teoria exposta.
    
    \subsection{Axiomas}
    
    Agora iremos apresentar alguns axiomas que servirão como base para todo o desenvolvimento dos conteúdos aqui propostos.
    
    \textbf{Axioma da Completude :} Dois conjuntos são iguais, se e somente se, todo elemento que pertence ao primeiro conjunto pertence ao segundo e, todo elemento que pertence ao segundo também pertence ao primeiro, ou seja:
    
    \[\forall A \hspace{1.5mm} \forall B \hspace{1.5mm} (A=B) \iff (\forall x \hspace{1.5mm} (x \in A \iff x \in B))\]
    
    Através desse axioma fica mais claro de entender certa propriedades dos conjuntos. Deste axioma, vem a explicação do motivo de que a ordem dos elementos de um conjunto não importa, pois dado dois conjuntos com os mesmos elemento, mas em ordem diferente (por exemplo, $X=\{a,b,c,d,e,f\}$ e o conjunto $Y=\{e,c,f,b,a,d\}$) eles ainda satisfazem a propriedade de que se $t$ pertence a um deles implica $t$ pertencer ao outro. Outra coisa interessante é que não importa se um conjunto possui elementos repetidos ele continuará igual ao que possui apenas um elemento, isto é, $X=\{a,b,d,e\}$ é igual ao $Y=\{b,a,d,a,e,b,b\}$. Ou seja, em um conjunto não importa a ordem dos elementos, nem as repetições de elementos.
    
    \textbf{Axioma da Existencia do Conjunto Vazio}

    \subsection{Diagrama de Venn}
    A maneira mais simples de entender a Teoria de Conjuntos, talvez seja o Diagrama de Venn. Criado por John Venn em 1880, esse sistema de representar graficamente conjuntos auxilia imensamente quem está começando a aprender esse assunto, principalmente para entender sobre a parte inicial de notações. Basicamente, consiste em representar num plano, o universo $\mathcal U$ como sendo um retângulo e cada conjunto $A,B,...$ como uma curva fechada simples (geralmente, círculo). Começando com a ideia mais simples, a imagem abaixo representa em vermelho o conjunto $A$ dentro do universo $\mathcal U$:
    
    %\begin{figure}[h!]
    %    \centering
    %    \includegraphics{fig_set_01_01.png}
    %    \caption{Conjunto $A$ dentro de $\mathcal U$}
    %    \label{fig:fig_set_01_01}
    %\end{figure}
    
    Já sobre o conjunto complementar $A^c$, ele simplesmente é a parte que está no retângulo, mas não está no círculo, justamente o que não estava de vermelho na figura anterior.
    
    %\begin{figure}[h!]
    %    \centering
    %    \includegraphics{fig_set_01_02.png}
    %    \caption{Conjunto complementar $A^c$}
    %    \label{fig:fig_set_01_02}
    %\end{figure}
    
    Para representar que um elemento pertence ao conjunto $A$, simplesmente colocamos ele dentro do espaço delimitado pelo círculo que representa o conjunto, e para representar que um elemento nāo pertence ao conjunto $A$, fazemos o inverso.
    
    
    %\begin{figure}[h!]
    %    \centering
    %    \includegraphics{figure_set_01_03.png}
    %    \caption{$a \in A$ e $b \notin A$}
    %    \label{fig:figure_set_01_03}
    %\end{figure}
    
    Quando vamos representar mais de um conjunto em um diagrama de Venn, devemos necessariamente ter todas as possíveis relações, mas o que isso significa? Por exemplo, quando temos $2$ conjuntos $A$ e $B$, significa que devemos ter $4$ regiões representando respectivamente: elementos que pertencem somente à $A$, elementos que pertencem somente à $B$, elementos que pertencem à $A$ e à $B$ simultaneamente e elementos que não pertencem a nenhum dos conjuntos. Precisamos disso, para que tudo que provarmos para dois conjuntos $A$ e $B$, possa ser generalizado para dois conjuntos quaisquer, isso será explicado melhor num exemplo posterior.
    Utilizando esse artífiico, podemos representar todas as definições de intersecçāo, uniāo e diferença de $2$ conjuntos, introduzidas na seçāo anterior. Veja nas figuras abaixo:
    
    %\begin{figure}[h!]
    %    \centering
    %    \includegraphics{figure_set_01_04.png}
    %    \caption{Intersecção $A \cap B$}
    %    \label{fig:figure_set_01_04}
    %\end{figure}
    
    %\begin{figure}[h!]
    %    \centering
    %    \includegraphics{figure_set_01_05.png}
    %    \caption{União $A \cup B$}
    %    \label{fig:figure_set_01_05}
    %\end{figure}
    
    %\begin{figure}[h!]
    %    \centering
    %    \includegraphics{figure_set_01_06.png}
    %    \caption{Diferença $A \setminus B$}
    %    \label{fig:figure_set_01_06}
    %\end{figure}
    
    Todavia, isso ainda não permite fazer tudo que desejamos. Se quisermos representar que $A \subseteq B$, a ideia inicial seria colocar o círculo $A$ dentro do círculo $B$, quebrando o rigor de manter todas as possíveis relações, pois não teremos uma região para representar os elementos que pertecem somente a $A$. Então, como resolver esse problema? Representamos os conjuntos $A$ e $B$ da mesma forma que anteriormente e também escrevemos o símbolo do conjunto vazio na região dos elementos que pertencem somente a $A$. Assim, só existem elementos no conjunto $A$ que estão na região $A\cap B$, ou seja, se um elemento está em $A$, como consequência ele está em $B$, exatamente a definição de $A \subseteq B$.
    
    %\begin{figure}[h!]
    %    \centering
    %    \includegraphics{figure_set_01_07.png}
    %    \caption{Subconjunto $A \subseteq B$}
    %    \label{fig:figure_set_01_07}
    %\end{figure}
    
    É inegável que para muitos exemplos isso se torna inviável.

\section{Conjuntos em Lean}
    
    Ao longo deste capítulo, observamos que, embora na teoria axiomática dos conjuntos se considere conjuntos de objetos distintos, em matemática é mais comum considerar subconjuntos de algum dominio fixo ($\mathcal U $). É assim que os conjuntos são tratados no Lean. Para qualquer dado do tipo $U$, Lean nos retorna um novo dado tipo $conjunto$ $U$, que consiste nos conjuntos dos elementos de $U$. Assim, por exemplo, podemos raciocinar sobre conjuntos de números naturais, conjuntos de números inteiro ou conjuntos de pares de números naturais.

\subsection{Primeiros Passos}
    Dado $A$ : $set$ $U$ e $x : U$, é possível escrever $x \in A$ para afirmar que $x$ é um elemento do conjunto $A$. O carácter $\in$ pode ser escrito em Lean usando $\backslash$in .
    

\begin{lstlisting}

    import data.set
    open set

    variable {U : Type}
    variables A B C : set U
    variable x : U

    #check x ∈ A
    #check A ∪ B
    #check B \ C
    #check C ∩ A
    #check -C
    #check ∅ ⊆ A
    #check B ⊆ univ
    
\end{lstlisting}


Abaixo temos uma pequena lista de como se representa os principais caractéres da parte de conjuntos no Lean: 

\begin{itemize}

  
    \item $\in$ $\rightarrow$ $\backslash$in
  
    \item $\notin$ $\rightarrow$ $\backslash$notin
  
    \item $\subset$ $\rightarrow$ $\backslash$subset
  
    \item $\subseteq$ $\rightarrow$ $\backslash$sub
  
    \item $\emptyset$ $\rightarrow$ $\backslash$empty
  
    \item $\cup$ $\rightarrow$ $\backslash$un \ ou \ $\backslash$cup \ ou \ $\backslash$union
  
    \item $\cap$ $\rightarrow$ $\backslash$i \ ou \ $\backslash$cap \ ou \ $\backslash$intersction

\end{itemize}

Obs$^{1}$.: O conjunto universal é denotado {\fontencoding{U}\fontfamily{cmtt}
\selectfont univ}.

Obs$^{2}$.: O complementar de um conjunto é denotada com um símbolo de negação antes de seu símbolo, assim: $-A$

$\qquad$

Noções básicas da teoria dos conjuntos são definidas na biblioteca principal do Lean, mas teoremas e notações adicionais estão disponíveis em uma biblioteca auxiliar que é carregada com o comando 
{\fontencoding{U}\fontfamily{cmtt}
\selectfont import data.set}, que deve aparecer no início do arquivo.

$\qquad$

O template abaixo serve para mostrar que o conjunto $A$ é um subconjunto de $B$:

\begin{lstlisting}

    import data.set
    open set

    variable {U : Type}
    variables A B C : set U

    -- BEGIN
    example : A ⊆ B :=
    assume x,
    assume h : x ∈ A,
    show x ∈ B, from sorry
    -- END

\end{lstlisting}

E o template a seguir pode ser usado para mostrar que $A$ e $B$ são iguais:

\begin{lstlisting}

    import data.set
    open set

    variable {U : Type}
    variables A B C : set U

    -- BEGIN
    example : A = B :=
    eq_of_subset_of_subset
      (assume x,
        assume h : x ∈ A,
        show x ∈ B, from sorry)
      (assume x,
        assume h : x ∈ B,
        show x ∈ A, from sorry)
    -- END
    
\end{lstlisting}

Opcionalmente, nós podemos mostrar a mesma prova de outra forma:

\begin{lstlisting}

    import data.set
    open set

    variable {U : Type}
    variables A B C : set U

    -- BEGIN
    example : A = B :=
    ext (assume x, iff.intro
      (assume h : x ∈ A,
        show x ∈ B, from sorry)
      (assume h : x ∈ B,
        show x ∈ A, from sorry))
    -- END
    
\end{lstlisting}

Aqui, {\fontencoding{U}\fontfamily{cmtt}
\selectfont ext} é uma sigla para ``extensionality", ou seja, extensionalidade. Matemáticamente, isso é representado desta forma:

$\qquad$

\begin{center}
    $\forall x$ ; ($x \in A$ $\leftrightarrow$ $x \in B$) $\rightarrow$ $A = B$.  
\end{center}

Reduzindo assim a prova $A = B$ para a prova: $\forall x$ ; ($x \in A$ $\leftrightarrow$ $x \in B$), que nós podemos realizar usando $\forall$ e $\leftrightarrow$ introdução.

$\qquad$

Além disso, o Lean possui interpretação ambígua para regras de união, interseção e outras operações em conjuntos que são consideradas “definições”. Isso significa que as expressões $x$ $\in$ $A$ $\cap$ $B$ e $x$ $\in$ $A$ $\wedge$ $x$ $\in$ $B$ possuem a mesma interpretação no Lean. Isso também é válido para outras construções em conjuntos, como: $x$ $\in$ $A$ $\backslash $ $B$ e $x$ $\in$ $A$ $\wedge$ $\neg$ $(x$ $\in$ $B)$. O termo $\neg$ $(x$ $\in$ $B)$ que acabara de ser apresentado é outra forma de escrever $x$ $\notin$ $B$. Abaixo são apresentadas algumas aplicações dessa interpretação em Lean:

\begin{lstlisting}

    import data.set
    open set

    variable {U : Type}
    variables A B C : set U

    -- BEGIN
    example : ∀ x, x ∈ A → x ∈ B → x ∈ A ∩ B :=
    assume x,
    assume h₁ : x ∈ A,
    assume h₂ : x ∈ B,
    show x ∈ A ∩ B, from and.intro h₁ h₂

    example : A ⊆ A ∪ B :=
    assume x,
    assume h : x ∈ A,
    show x ∈ A ∪ B, from or.inl h

    example : ∅ ⊆ A  :=
    assume x,
    assume h : x ∈ (∅ : set U),
    show x ∈ A, from false.elim h
    -- END

\end{lstlisting}

Observe no último exemplo a necessidade de usar a notação {\fontencoding{U}\fontfamily{cmtt}
\selectfont ($\emptyset$ : set U)}, dizendo ao Lean que o $\emptyset$ é um conjunto de {\fontencoding{U}\fontfamily{cmtt}
\selectfont (U)}. O Lean pode, em algumas situações, inferir informações como essa dentro do contexto (por exemplo, quando queremos mostrar que $x$ $\in$ $A$, onde $A$ é do tipo {\fontencoding{U}\fontfamily{cmtt}
\selectfont (set U)}), mas para isso acontecer, é necessário o uso de alguns comandos.

Opcionalmente, podemos usar alguns teoremas da biblioteca do Lean, projetados especificamente para uso em conjuntos:

\begin{lstlisting}

    import data.set
    open set

    variable {U : Type}
    variables A B C : set U

    -- BEGIN
    example : ∀ x, x ∈ A → x ∈ B → x ∈ A ∩ B :=
    assume x,
    assume : x ∈ A,
    assume : x ∈ B,
    show x ∈ A ∩ B, from mem_inter ‹x ∈ A› ‹x ∈ B›

    example : A ⊆ A ∪ B :=
    assume x,
    assume h : x ∈ A,
    show x ∈ A ∪ B, from mem_union_left B h

    example : ∅ ⊆ A  :=
    assume x,
    assume : x ∈ ∅,
    show x ∈ A, from absurd this (not_mem_empty x)
 
\end{lstlisting}

Lembre-se que{\fontencoding{U}\fontfamily{cmtt}
\selectfont absurd} pode ser usado para provar qualquer fato a partir de duas hipóteses contrárias: $h_1$ : $P$ e $h_2$ : $\neg$ $P$. 

Aqui, o teorema {\fontencoding{U}\fontfamily{cmtt}
\selectfont not\_mem\_empty x} significa $x$ $\notin$ $\emptyset$. Você pode ver a declaração dos teoremas usando o comando {\fontencoding{U}\fontfamily{cmtt}
\selectfont \#check} no Lean:

\begin{lstlisting}

    import data.set
    open set

    -- BEGIN
    #check @mem_inter
    #check @mem_of_mem_inter_left
    #check @mem_of_mem_inter_right
    #check @mem_union_left
    #check @mem_union_right
    #check @mem_or_mem_of_mem_union
    #check @not_mem_empty
    -- END

\end{lstlisting}

Aqui, o símbolo{\fontencoding{U}\fontfamily{cmtt}
\selectfont @} no Lean impede que ele tente preencher argumentos implícitos automaticamente, forçando-o a exibir a declaração completa do teorema.

    \[\forall A, \space \forall B, \space (A=B) \iff (\forall x,  (x \in A \iff x \in B))\]
